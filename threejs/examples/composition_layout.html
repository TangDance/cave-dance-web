<!DOCTYPE html>
<html data-wf-domain="www.tangdanceai.com" data-wf-page="61c5e06d4c32b4d823aaf556" data-wf-site="603fe89ec4bbcece7ee6a53a" lang="en">
<head>
	<meta charset="utf-8" />
	<title>Tang Dance x A.I. </title>
	<meta content="width=device-width, initial-scale=1" name="viewport" />
	<link href="master.css" rel="stylesheet" type="text/css" />
	<script type="text/javascript">
		! function(o, c) {
			var n = c.documentElement,
				t = " w-mod-";
			n.className += t + "js", ("ontouchstart" in o || o.DocumentTouch && c instanceof DocumentTouch) && (n.className += t + "touch")
		}(window, document);
	</script>
	<link href="https://assets-global.website-files.com/603fe89ec4bbcece7ee6a53a/61014076aa014a767ce9208c_favicon.png" rel="shortcut icon" type="image/x-icon" />
	<link href="https://assets-global.website-files.com/603fe89ec4bbcece7ee6a53a/610140795b9a3f0382a58e51_web-clip.png" rel="apple-touch-icon" />
	<link href="composition_transform_scroll_style.css" rel="stylesheet" type="text/css" />
  <!-- <link rel="preload" href="./scene.spline" as="fetch"> -->

	<script type="importmap">
		{
      "imports": {
        "three": "../build/three.module.js"
      }
    }
  </script>

	<script type="module">

		import * as THREE from 'three';
    import { OrbitControls } from './jsm/controls/OrbitControls.js';
    import { BVHLoader } from './jsm/loaders/BVHLoader.js';
    import { GLTFLoader } from './jsm/loaders/GLTFLoader.js';
    import * as SkeletonUtils from './jsm/utils/SkeletonUtils.js';


    let mixer;

    // Setup

    const scene = new THREE.Scene();

    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);

    const renderer = new THREE.WebGLRenderer({
      canvas: document.querySelector('#bg'),
    });

    const clock = new THREE.Clock();

    renderer.setPixelRatio(window.devicePixelRatio);
    renderer.setSize(window.innerWidth, window.innerHeight);
    camera.position.setZ(30);
    camera.position.setY(0);
    camera.position.setX(0);

    renderer.render(scene, camera);

    // Lights

    const pointLight = new THREE.PointLight(0xffffff);
    pointLight.position.set(5, 5, 5);

    const ambientLight = new THREE.AmbientLight(0xffffff);
    scene.add(pointLight, ambientLight);

    // Helpers

    const lightHelper = new THREE.PointLightHelper(pointLight);
		const size = 200;
		const divisions = 50;
		const gridHelper = new THREE.GridHelper( size, divisions );
		const axesHelper = new THREE.AxesHelper( 20 );

		// scene.add(lightHelper, gridHelper, axesHelper);
		// const controls = new OrbitControls(camera, renderer.domElement);


    // Background

    // const spaceTexture = new THREE.TextureLoader().load('textures/dunhuang/dunhuang-1.jpg');
    // scene.background = spaceTexture;

		// Torus

		// const geometry = new THREE.TorusGeometry(10, 3, 16, 100);
		// const material = new THREE.MeshStandardMaterial({ color: 0xff6347 });
		// const torus = new THREE.Mesh(geometry, material);

		//scene.add(torus);


    // Image Mural

    const muralTexture = new THREE.TextureLoader().load('textures/dunhuang/mural_500.png');
    const mural = new THREE.Mesh(new THREE.BoxGeometry(3, 3, 0.1), new THREE.MeshBasicMaterial({ map: muralTexture }));

		const scaleMural = 2;
		mural.scale.set(scaleMural, scaleMural, scaleMural);


    scene.add(mural);

    mural.position.z = -5;
    mural.position.x = 2;

    // Image Drawing

    const drawingTexture = new THREE.TextureLoader().load('textures/dunhuang/drawing.png');
    const drawing = new THREE.Mesh(new THREE.BoxGeometry(3, 3, 0.1), new THREE.MeshBasicMaterial({ map: drawingTexture }));

		const scaleDrawing = 2;
		drawing.scale.set(scaleDrawing, scaleDrawing, scaleDrawing);

    scene.add(drawing);

    drawing.position.z = 5;
    drawing.position.x = 2;


    // Image Skeleton

    // const skeletonTexture = new THREE.TextureLoader().load('textures/dunhuang/skeleton.png');
    // const skeleton = new THREE.Mesh(new THREE.BoxGeometry(3, 3, 0.1), new THREE.MeshBasicMaterial({ map: skeletonTexture }));
		//
    // scene.add(skeleton);
		//
    // skeleton.position.z = 15;
    // skeleton.position.x = -5;


		// 3D Object - BVH Mo-Cap Skeleton
    const bvh = new BVHLoader();
    bvh.load( "models/bvh/0-6000.bvh", function ( result ) {

      const skeletonHelper = new THREE.SkeletonHelper( result.skeleton.bones[ 0 ] );
      skeletonHelper.skeleton = result.skeleton; // allow animation mixer to bind to THREE.SkeletonHelper directly

      const boneContainer = new THREE.Group();
      boneContainer.add( result.skeleton.bones[ 0 ] );

      scene.add( skeletonHelper );
      scene.add( boneContainer );

			const scale = 0.07;
			boneContainer.scale.set(scale, scale, scale);
			skeletonHelper.scale.set(scale, scale, scale);
			boneContainer.translateX(-6);
			boneContainer.translateY(-6);
			boneContainer.translateZ(10);
			skeletonHelper.translateX(-6);
			skeletonHelper.translateY(-6);
			skeletonHelper.translateZ(15);

      // play animation
      mixer = new THREE.AnimationMixer( skeletonHelper );
      mixer.clipAction( result.clip ).setEffectiveWeight( 1.0 ).play();

    } );


		// 3D Object - Jam's model

		const loader = new GLTFLoader().setPath( 'models/glTF/Dunhuang/' );
		loader.load( 'wire.glb', function ( gltf ) {

			const wire = SkeletonUtils.clone( gltf.scene );

			const scale = 25;
			wire.scale.set(scale, scale, scale);

			scene.add( wire);
      wire.position.z = 20;
      wire.position.x = 0;

			animate();

		} );


    // // Moon
		//
    // const moonTexture = new THREE.TextureLoader().load('textures/dunhuang/moon.jpg');
    // const normalTexture = new THREE.TextureLoader().load('textures/dunhuang/normal.jpg');
		//
    // const moon = new THREE.Mesh(
    //   new THREE.SphereGeometry(3, 32, 32),
    //   new THREE.MeshStandardMaterial({
    //     map: moonTexture,
    //     normalMap: normalTexture,
    //   })
    // );
		//
    // scene.add(moon);
		//
    // moon.position.z = 20;
    // moon.position.setX(-10);


		// Scroll Animation

		// function moveCamera() {
		// 	const t = document.body.getBoundingClientRect().top;
		//
		// 	//mural.rotation.y += 0.01;
		// 	//mural.rotation.z += 0.01;
		//
		// 	moon.rotation.x += 0.05;
		// 	moon.rotation.y += 0.075;
		// 	moon.rotation.z += 0.05;
		//
		// 	camera.position.z = t * -0.01;
		// 	camera.position.x = t * -0.0002;
		// 	camera.rotation.y = t * -0.0002;
		// }
		//
		// document.body.onscroll = moveCamera;
		// moveCamera();
		//

    // Animation Loop

    function animate() {
      requestAnimationFrame(animate);

      // torus.rotation.x += 0.01;
      // torus.rotation.y += 0.005;
      // torus.rotation.z += 0.01;

      //moon.rotation.x += 0.005;

      // animate the skeleton
      const delta = clock.getDelta();
      if ( mixer ) mixer.update( delta );

			//	controls.update(); // for the helpers

      renderer.render(scene, camera);
    }

    animate();

  </script>


</head>

<body class="body threeDscroll">

	<canvas id="bg"></canvas>


</body>

</html>
